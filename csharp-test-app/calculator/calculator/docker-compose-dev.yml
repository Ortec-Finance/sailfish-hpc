version: "3"

services:
    calculator-db:
        image: postgres:12
        # since we don't need (or can) scale the db just give it a name so the name is not autogenerated
        container_name: calculator-db
        ports:
        # for local dev only - so you are able to access the db use expose otherwise
        - 5432:5432
        environment:
        - POSTGRES_DB=myDatabase
        - POSTGRES_USER=myUsername
        - POSTGRES_PASSWORD=myPassword
    calculator-api:
        image: calculator:latest
        depends_on:
            # Start db service before the api
            - calculator-db
        ports:
            # Expose port 8080 to the host system
            - 8080:8080
        env_file:
            - calculator.env